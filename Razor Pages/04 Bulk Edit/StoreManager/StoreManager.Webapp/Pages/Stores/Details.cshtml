@page "{guid}"
@using StoreManager.Webapp.Dto
@model StoreManager.Webapp.Pages.Stores.DetailsModel

<h3>Details zum Store @Model.Store.Name</h3>

<h4>Liste aller Angebote</h4>
<form method="post">
<table class="table table-sm">
    <thead>
        <tr>
            <th>EAN</th>
            <th>Produkt</th>
            <th>Preis</th>
            <th>Sold out?</th>
            <th>Last Update</th>
            <th>Aktionen</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var o in Model.Store.Offers.OrderBy(o => o.Product.Name))
        {
            var offer = (OfferDto) Model.Offers[o.Guid];
            <tr>
                <td>@o.ProductEan</td>
                <td>@o.Product.Name</td>
                <td>
                    <input type="hidden" asp-for="Offers[o.Guid].Guid" />
                    <input class="form-control" asp-for="Offers[o.Guid].Price" />
                    <small>
                        <span class="text-danger" asp-validation-for="Offers[o.Guid].Price"></span>
                    </small>
                </td>
                <td><input class="form-check-input" asp-for="Offers[o.Guid].SoldOut" /></td>
                <td>@offer.LastUpdate.ToString("dd.MM.yyyy")</td>
                <td><button class="btn-primary btn" type="submit" asp-route-offerGuid="@o.Guid">Save</button></td>
            </tr>
        }
    </tbody>
</table>
</form>